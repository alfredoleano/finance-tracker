{"ast":null,"code":"var _s = $RefreshSig$();\nimport { useState, useEffect } from \"react\";\nimport { getCategories, createCategory, updateCategory, deleteCategoryById } from './api';\nconst useCategories = () => {\n  _s();\n  // State to manage the list of categories\n  const [categories, setCategories] = useState([]);\n\n  // State to keep track of total value\n  const [totalMaxValue, setTotalMaxValue] = useState(0);\n\n  // State to keep track of value\n  const [totalValue, setTotalValue] = useState(0);\n\n  // Get data from database and set it into categories\n  useEffect(() => {\n    const fetchCategories = async () => {\n      try {\n        const data = await getCategories();\n        setCategories(data);\n      } catch (error) {\n        console.error('Error fetching categories:', error);\n      }\n    };\n    fetchCategories();\n  }, []);\n\n  // Calculate the new total values when categories is updated\n  useEffect(() => {\n    // Calculating new value\n    const newValues = parseFloat(categories.reduce((accumulator, category) => {\n      return accumulator + category.value;\n    }, 0).toFixed(2));\n    setTotalValue(newValues);\n\n    // Calculating new total value\n    const newTotal = categories.reduce((accumulator, category) => {\n      return accumulator + category.maxValue;\n    }, 0);\n    setTotalMaxValue(newTotal);\n  }, [categories]);\n\n  // Function to add a new category\n  const addCategory = async (name, maxValue) => {\n    try {\n      // Create a new category object (id is not included bc that is generated in the backend)\n      const newCategory = {\n        name,\n        value: 0,\n        maxValue\n      };\n\n      // Send the request to create a new category in the backend\n      const data = await createCategory(newCategory);\n\n      // Update the local categories state with the new category\n      setCategories([...categories, data]);\n    } catch (error) {\n      // Handle any errors that occurred during the API call\n      console.error('Error adding category:', error);\n    }\n  };\n\n  // Function to add or subtract amount in category budget\n  const addSubtractAmount = async (id, addValue) => {\n    try {\n      // Find the category to be updated\n      const category = categories.find(category => category.id === id);\n\n      // Create a new object with the updated value\n      const updatedCategory = {\n        ...category,\n        value: category.value + addValue\n      };\n\n      // Call the API function to update the category in the backend\n      const data = await updateCategory(id, updatedCategory);\n\n      // Update the categories state with the response data\n      setCategories(categories.map(category => category.id === id ? data : category));\n    } catch (error) {\n      console.error('Error updating category:', error);\n    }\n  };\n\n  // Function to delete a category\n  const deleteCategory = async id => {\n    try {\n      // Call the API to delete the category in the backend\n      await deleteCategoryById(id);\n\n      // Delete the category with the matching id in the categories state\n      setCategories(categories.filter(category => category.id !== id));\n    } catch (error) {\n      console.error('Error deleting category:', error);\n    }\n  };\n\n  // Function to change all the values of a category\n  const changeValues = async (id, limit, value) => {\n    try {\n      // Find the category by id\n      const category = categories.find(category => category.id === id);\n\n      // Create the updated category object\n      const updatedCategory = {\n        ...category,\n        value: value,\n        maxValue: limit\n      };\n\n      // Send the updated category to the backend\n      await updateCategory(id, updatedCategory);\n\n      // Update the categories state, replaces the category with the updated values if the id matches\n      setCategories(categories.map(category => category.id === id ? updatedCategory : category));\n    } catch (error) {\n      console.error('Error changing values:', error);\n    }\n  };\n  return {\n    categories,\n    totalMaxValue,\n    totalValue,\n    addCategory,\n    addSubtractAmount,\n    changeValues,\n    deleteCategory\n  };\n};\n_s(useCategories, \"jLJV1r1EvNgLFKFmRJo+PlUWKpw=\");\nexport default useCategories;","map":{"version":3,"names":["useState","useEffect","getCategories","createCategory","updateCategory","deleteCategoryById","useCategories","_s","categories","setCategories","totalMaxValue","setTotalMaxValue","totalValue","setTotalValue","fetchCategories","data","error","console","newValues","parseFloat","reduce","accumulator","category","value","toFixed","newTotal","maxValue","addCategory","name","newCategory","addSubtractAmount","id","addValue","find","updatedCategory","map","deleteCategory","filter","changeValues","limit"],"sources":["/Users/alfredoleano/Desktop/Projects/finance-tracker/src/useCategories.js"],"sourcesContent":["import { useState, useEffect } from \"react\";\nimport { getCategories, createCategory, updateCategory, deleteCategoryById } from './api';\n\n\nconst useCategories = () => {\n    // State to manage the list of categories\n    const [categories, setCategories] = useState([]);\n  \n    // State to keep track of total value\n    const [totalMaxValue, setTotalMaxValue] = useState(0);\n\n    // State to keep track of value\n    const [totalValue, setTotalValue] = useState(0);\n\n    // Get data from database and set it into categories\n    useEffect(() => {\n        const fetchCategories = async () => {\n        try {\n            const data = await getCategories();\n            setCategories(data);\n        } catch (error) {\n            console.error('Error fetching categories:', error);\n        }\n        };\n\n        fetchCategories();\n    }, []);\n\n    // Calculate the new total values when categories is updated\n    useEffect(() => {\n        // Calculating new value\n        const newValues = parseFloat(categories.reduce((accumulator, category) => {\n            return accumulator + category.value;\n        },0).toFixed(2));\n\n        setTotalValue(newValues);\n\n        // Calculating new total value\n        const newTotal = categories.reduce((accumulator, category) => {\n            return accumulator + category.maxValue;\n        }, 0);\n        \n        setTotalMaxValue(newTotal);\n    }, [categories]);\n\n    // Function to add a new category\n    const addCategory = async (name, maxValue) => {\n        try{\n            // Create a new category object (id is not included bc that is generated in the backend)\n            const newCategory = { name, value: 0, maxValue};\n\n            // Send the request to create a new category in the backend\n            const data = await createCategory(newCategory);\n\n            // Update the local categories state with the new category\n            setCategories([...categories, data]);\n        } catch (error) {\n        // Handle any errors that occurred during the API call\n        console.error('Error adding category:', error);\n        }\n    };\n\n    // Function to add or subtract amount in category budget\n    const addSubtractAmount = async (id, addValue) => {\n        try {\n            // Find the category to be updated\n            const category = categories.find(category => category.id === id);\n\n            // Create a new object with the updated value\n            const updatedCategory = {\n                ...category,\n                value: category.value + addValue\n            };\n\n            // Call the API function to update the category in the backend\n            const data = await updateCategory(id, updatedCategory);\n\n            // Update the categories state with the response data\n            setCategories(categories.map(category => \n                category.id === id ? data : category\n            ));\n        } catch (error) {\n        console.error('Error updating category:', error);\n        }\n    };\n\n    // Function to delete a category\n    const deleteCategory = async (id) => {\n        try {\n            // Call the API to delete the category in the backend\n            await deleteCategoryById(id);\n\n            // Delete the category with the matching id in the categories state\n            setCategories(categories.filter(category => category.id !== id));\n        } catch (error) {\n        console.error('Error deleting category:', error);\n        }\n    }\n\n    // Function to change all the values of a category\n    const changeValues = async (id, limit, value) => {\n        try {\n            // Find the category by id\n            const category = categories.find(category => category.id === id);\n\n            // Create the updated category object\n            const updatedCategory = { \n                ...category,\n                value: value,\n                maxValue: limit\n            }\n\n            // Send the updated category to the backend\n            await updateCategory(id, updatedCategory);\n\n            // Update the categories state, replaces the category with the updated values if the id matches\n            setCategories(categories.map(category => \n                category.id === id ? updatedCategory : category\n            ));\n        } catch (error) {\n        console.error('Error changing values:', error);\n        }\n    }\n\n    return {\n        categories,\n        totalMaxValue,\n        totalValue,\n        addCategory,\n        addSubtractAmount,\n        changeValues,\n        deleteCategory\n    };\n};\n\nexport default useCategories;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}